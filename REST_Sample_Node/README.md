# 負荷試験用のRESTサービス

RESTサービスの動作確認やチューニングのために作ったツールで、マルチコアの環境でコアの数だけ、ポート番号を変更したRESTサービスのサーバーを起動できます。


## 実行環境

#### RESTサーバー restServerNode

RESTのサーバーは node v6.11.2 で開発しました。


#### RESTクライアント restClientNode

高負荷を与えるクライアントは、restClientNodeのpython3.pyを利用してください。
Pythonのバージョンは2.7.14です。



## RESTサーバーの使い方

restServerNodeに移動して次のコマンドで必要なパッケージをインストールします。

~~~
$ npm install
~~~


ポート番号を一つだけ指定して起動する場合は、次のコマンドで起動します。

~~~
$ npm start 3000
~~~


コアの数だけRESTサーバーを起動したい場合は、シェルの変数port_numを編集して、次のシェルを実行します。 port_startが開始のポート番号で、port_numの数だけRESTサーバーを起動します。


~~~
$ ./start.sh
~~~


## クライアントの使い方

RESTサーバーのアドレスに合わせて、client3.pyの変数 urlとnを変更します。urlはRESTサーバーのアドレスで、nはRESTサーバーの数で、TCPポート3000から増分1で、RESTサーバー数分だけポートがリッスンされる事を想定しています。

ディレクトリ restClientNode に移動して、以下のスクリプトを実行します。無限ループでRESTサーバーをアクセスして負荷をかけます。 負荷を大きくしたい場合は、クライアントの同時実行数を増やしてください。

~~~
$ ./client3.py
~~~


